class KAnime{constructor(e){if(!KAnime.isModernBrowser())throw new Error("Your browser is incompatible with the KAnime library. Please update to a recent version.");if("string"==typeof e)this.elements=Array.from(document.querySelectorAll(e));else if(e instanceof HTMLElement)this.elements=[e];else{if(!(e instanceof NodeList||Array.isArray(e)))throw new Error("Invalid selector. Must be a string, HTMLElement, or NodeList.");this.elements=Array.from(e)}this.duration=500}each(e){return this.elements.forEach(e),this}setDuration(e){return this.duration=e,this}append(e){return this.each((t=>{"string"==typeof e?t.insertAdjacentHTML("beforeend",e):e instanceof HTMLElement&&t.appendChild(e)}))}prepend(e){return this.each((t=>{"string"==typeof e?t.insertAdjacentHTML("afterbegin",e):e instanceof HTMLElement&&t.insertBefore(e,t.firstChild)}))}before(e){return this.each((t=>{"string"==typeof e?t.insertAdjacentHTML("beforebegin",e):e instanceof HTMLElement&&t.parentNode.insertBefore(e,t)}))}after(e){return this.each((t=>{"string"==typeof e?t.insertAdjacentHTML("afterend",e):e instanceof HTMLElement&&t.parentNode.insertBefore(e,t.nextSibling)}))}remove(){return this.each((e=>{e.parentNode&&e.parentNode.removeChild(e)}))}clone(e=!0){const t=this.elements.map((t=>t.cloneNode(e)));return new KAnime(t)}wrap(e){return this.each((t=>{const n="string"==typeof e?document.createElement("div").insertAdjacentHTML("afterbegin",e).firstElementChild:e.cloneNode(!0);t.parentNode.insertBefore(n,t),n.appendChild(t)}))}unwrap(){return this.each((e=>{const t=e.parentNode;if(t&&t!==document.body){for(;t.firstChild;)t.parentNode.insertBefore(t.firstChild,t);t.parentNode.removeChild(t)}}))}on(e,t,n=null,i=null){const r="string"==typeof t,s=e.split(/[,\s]+/);return this.each((e=>{s.forEach((s=>{r?e.addEventListener(s,(e=>{e.target.matches(t)&&n.call(i||e.target,e)})):e.addEventListener(s,(n=>{t.call(i||e,n)}))}))}))}off(e,t){return this.each((n=>n.removeEventListener(e,t)))}one(e,t){return this.each((n=>{const i=r=>{t(r),n.removeEventListener(e,i)};n.addEventListener(e,i)}))}trigger(e){return this.each((t=>{const n=new Event(e,{bubbles:!0,cancelable:!0});t.dispatchEvent(n)}))}hover(e,t){return this.each((n=>{n.addEventListener("mouseenter",e),n.addEventListener("mouseleave",t)}))}fadeIn(){return this.each((e=>{"none"===window.getComputedStyle(e).display&&(e.style.display="block",e.style.opacity=0),e.style.transition=`opacity ${this.duration}ms ease-in-out`,e.offsetWidth,requestAnimationFrame((()=>{e.style.opacity=1}))}))}fadeOut(){return this.each((e=>{e.style.opacity=1,e.style.transition=`opacity ${this.duration}ms ease-in-out`,e.offsetWidth,requestAnimationFrame((()=>{e.style.opacity=0,setTimeout((()=>{e.style.display="none"}),this.duration)}))}))}slideUp(){return this.each((e=>{if("none"===window.getComputedStyle(e).display)return;const t=window.getComputedStyle(e),n=e.offsetHeight,i=t.paddingTop,r=t.paddingBottom,s=t.transition;e.style.transition="none",e.style.boxSizing="border-box",e.style.height=n+"px",e.style.paddingTop=i,e.style.paddingBottom=r,e.style.overflow="hidden",e.offsetHeight,e.style.transition=`height ${this.duration}ms, padding ${this.duration}ms`,requestAnimationFrame((()=>{e.style.height="0",e.style.paddingTop="0",e.style.paddingBottom="0",setTimeout((()=>{e.style.display="none",e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("overflow"),e.style.transition=s,e.style.removeProperty("box-sizing")}),this.duration)}))}))}slideDown(){return this.each((e=>{if("none"!==window.getComputedStyle(e).display)return;e.style.removeProperty("display");let t=window.getComputedStyle(e).display;"none"===t&&(t="block"),e.style.display=t;const n=window.getComputedStyle(e),i=e.scrollHeight,r=n.paddingTop,s=n.paddingBottom,o=n.transition;e.style.transition="none",e.style.boxSizing="border-box",e.style.height="0",e.style.paddingTop="0",e.style.paddingBottom="0",e.style.overflow="hidden",e.offsetHeight,e.style.transition=`height ${this.duration}ms, padding ${this.duration}ms`,requestAnimationFrame((()=>{e.style.height=i+"px",e.style.paddingTop=r,e.style.paddingBottom=s,setTimeout((()=>{e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("overflow"),e.style.transition=o,e.style.removeProperty("box-sizing")}),this.duration)}))}))}fadeToggle(){return this.each((e=>{"none"===window.getComputedStyle(e).display?this.fadeIn():this.fadeOut()}))}slideToggle(){return this.each((e=>{"none"===window.getComputedStyle(e).display?this.slideDown():this.slideUp()}))}serialize(){const e=this.elements[0];if(!(e instanceof HTMLFormElement))throw new Error("serialize can only be used on form elements.");new FormData(e);const t=new URLSearchParams;return Array.from(e.elements).forEach((e=>{!e.disabled&&e.name&&("checkbox"===e.type||"radio"===e.type?e.checked&&t.append(e.name,e.value):t.append(e.name,e.value))})),t.toString()}serializeArray(){const e=this.elements[0];if(!(e instanceof HTMLFormElement))throw new Error("serializeArray can only be used on form elements.");const t=[];return Array.from(e.elements).forEach((e=>{!e.disabled&&e.name&&("checkbox"===e.type||"radio"===e.type?e.checked&&t.push({name:e.name,value:e.value}):t.push({name:e.name,value:e.value}))})),t}val(e){return void 0===e?"checkbox"===this.elements[0].type||"radio"===this.elements[0].type?this.elements.filter((e=>e.checked)).map((e=>e.value)):this.elements[0].value:this.each((t=>t.value=e))}param(){return this.serialize()}submit(e){return this.each((t=>{if(!(t instanceof HTMLFormElement))throw new Error("The submit method can only be used on form elements.");t.addEventListener("submit",(n=>{n.preventDefault();const i=new FormData(t),r=Object.fromEntries(i.entries());e(r,t)}))}))}async ajaxSubmit(e={}){const t=this.elements[0];if(!(t instanceof HTMLFormElement))throw new Error("ajaxSubmit can only be used on form elements.");const n=new FormData(t),i=e.method||"POST",r={...e.headers};let s;e.json?(s=JSON.stringify(Object.fromEntries(n.entries())),r["Content-Type"]="application/json"):s="GET"===i.toUpperCase()?null:n;const o=new AbortController,a=e.timeout||0;a>0&&setTimeout((()=>o.abort()),a);try{const e=await fetch(t.action,{method:i,headers:r,body:s,signal:o.signal});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const n=e.headers.get("Content-Type");return n&&n.includes("application/json")?await e.json():await e.text()}catch(e){if("AbortError"===e.name)throw new Error("Request timed out");throw e}}attr(e,t){return void 0===t?this.elements[0].getAttribute(e):this.each((n=>n.setAttribute(e,t)))}attrs(e){if(void 0===e){const e=this.elements[0];return e?Array.from(e.attributes).reduce(((e,t)=>(e[t.name]=t.value,e)),{}):{}}return this.each((t=>{for(const[n,i]of Object.entries(e))t.setAttribute(n,i)}))}toggleAttr(e,t){return this.each((n=>{void 0===t?n.hasAttribute(e)?n.removeAttribute(e):n.setAttribute(e,""):t?n.setAttribute(e,""):n.removeAttribute(e)}))}removeAttr(e){return this.each((t=>t.removeAttribute(e)))}css(e,t){return void 0===t?window.getComputedStyle(this.elements[0])[e]:this.each((n=>n.style[e]=t))}addClass(e){return this.each((t=>t.classList.add(e)))}removeClass(e){return this.each((t=>t.classList.remove(e)))}toggleClass(e){return this.each((t=>t.classList.toggle(e)))}static isModernBrowser(){return"querySelector"in document&&"addEventListener"in window&&"fetch"in window}static checkCompatibility(){if(!("querySelector"in document&&"addEventListener"in window&&"fetch"in window))throw new Error("Your browser is incompatible with the KAnime library. Please update to a recent version.")}static select(e){return new KAnime(e)}static createVirtualElement(e,t={},n=[]){const i=document.createElement(e);for(const[e,n]of Object.entries(t))i.setAttribute(e,n);return n.forEach((e=>{"string"==typeof e?i.appendChild(document.createTextNode(e)):i.appendChild(e)})),i}static extend(e,...t){return Object.assign(e,...t)}static i18n={locale:"en",translations:{},setLocale(e){this.locale=e},addTranslations(e,t){this.translations[e]={...this.translations[e],...t}},translate(e){return this.translations[this.locale]?.[e]||e}};detach(){return this.each((e=>{e.parentNode&&e.parentNode.removeChild(e)}))}replaceWith(e){return this.each((t=>{"string"==typeof e?(t.insertAdjacentHTML("beforebegin",e),t.parentNode.removeChild(t)):e instanceof HTMLElement&&t.parentNode.replaceChild(e,t)}))}empty(){return this.each((e=>{for(;e.firstChild;)e.removeChild(e.firstChild)}))}closest(e){const t=this.elements.map((t=>t.closest(e))).filter((e=>e));return new KAnime(t)}next(){const e=this.elements.map((e=>e.nextElementSibling)).filter((e=>e));return new KAnime(e)}prev(){const e=this.elements.map((e=>e.previousElementSibling)).filter((e=>e));return new KAnime(e)}find(e){const t=this.elements.flatMap((t=>Array.from(t.querySelectorAll(e))));return new KAnime(t)}data(e,t){return void 0===t?this.elements[0]?.dataset[e]:this.each((n=>{n.dataset[e]=t}))}toggle(){return this.each((e=>{const t="none"===window.getComputedStyle(e).display;e.style.display=t?"block":"none"}))}stop(){return this.each((e=>{e.style.transition="none"}))}animate(e,t=this.duration,n="linear"){return new Promise((i=>{this.each((r=>{const s={},o={};for(const t in e)s[t]=parseFloat(getComputedStyle(r)[t])||0,o[t]=e[t];let a;const l=d=>{a||(a=d);const c=Math.min((d-a)/t,1),h=this._ease(c,n);for(const t in e){const e=s[t],n=e+(o[t]-e)*h;r.style[t]=n+("opacity"===t?"":"px")}c<1?requestAnimationFrame(l):i()};requestAnimationFrame(l)}))}))}_ease(e,t){switch(t){case"linear":default:return e;case"ease-in":return e*e;case"ease-out":return e*(2-e);case"ease-in-out":return e<.5?2*e*e:(4-2*e)*e-1}}async ajax({url:e,method:t="GET",data:n=null,headers:i={},timeout:r=0}){const s=new AbortController,o=s.signal;r>0&&setTimeout((()=>s.abort()),r);const a=n instanceof FormData,l={...i,...a?{}:{"Content-Type":"application/json"}},d=a?n:n?JSON.stringify(n):null;try{const n=await fetch(e,{method:t,headers:l,body:"GET"===t.toUpperCase()?null:d,signal:o});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const i=n.headers.get("Content-Type");return i&&i.includes("application/json")?await n.json():i&&i.includes("text/")?await n.text():await n.blob()}catch(e){if("AbortError"===e.name)throw new Error("Request timed out");throw e}}static plugins={};static use(e,t){if("function"!=typeof t)throw new Error(`Plugin ${e} must be a function.`);this.plugins[e]=t}static callPlugin(e,...t){if(this.plugins[e])return this.plugins[e](...t);throw new Error(`Plugin ${e} not found.`)}static listPlugins(){return Object.keys(this.plugins)}static removePlugin(e){if(!this.plugins[e])throw new Error(`Plugin ${e} not found.`);delete this.plugins[e]}isVisible(){return this.elements.some((e=>"none"!==window.getComputedStyle(e).display&&e.offsetHeight>0))}hasClass(e){return this.elements.some((t=>t.classList.contains(e)))}hasAttr(e){return this.elements.some((t=>t.hasAttribute(e)))}isChecked(){return this.elements.some((e=>!0===e.checked))}isEnabled(){return this.elements.some((e=>!e.disabled))}isDisabled(){return this.elements.some((e=>e.disabled))}static getScript(e){return new Promise(((t,n)=>{const i=document.createElement("script");i.src=e,i.onload=t,i.onerror=n,document.head.appendChild(i)}))}is(e){return this.elements.some((t=>t.matches(e)))}play(){return this.each((e=>{e instanceof HTMLMediaElement&&e.play().catch((e=>console.error("Error playing media:",e)))}))}pause(){return this.each((e=>{e instanceof HTMLMediaElement&&e.pause()}))}currentTime(e){return void 0===e?this.elements[0]instanceof HTMLMediaElement?this.elements[0].currentTime:null:this.each((t=>{t instanceof HTMLMediaElement&&(t.currentTime=e)}))}volume(e){return void 0===e?this.elements[0]instanceof HTMLMediaElement?this.elements[0].volume:null:this.each((t=>{t instanceof HTMLMediaElement&&(t.volume=Math.min(1,Math.max(0,e)))}))}mute(e=!0){return this.each((t=>{t instanceof HTMLMediaElement&&(t.muted=e)}))}isPlaying(){return this.elements.some((e=>e instanceof HTMLMediaElement&&!e.paused&&!e.ended))}loadSource(e){return this.each((t=>{t instanceof HTMLMediaElement&&(t.src=e,t.load())}))}playbackRate(e){return void 0===e?this.elements[0]instanceof HTMLMediaElement?this.elements[0].playbackRate:null:this.each((t=>{t instanceof HTMLMediaElement&&(t.playbackRate=e)}))}width(e){return void 0===e?this.elements[0]?.offsetWidth||0:this.each((t=>{t.style.width=`${e}px`}))}height(e){return void 0===e?this.elements[0]?.offsetHeight||0:this.each((t=>{t.style.height=`${e}px`}))}static documentWidth(){return Math.max(document.documentElement.clientWidth,document.body.scrollWidth,document.documentElement.scrollWidth,document.body.offsetWidth,document.documentElement.offsetWidth)}static documentHeight(){return Math.max(document.documentElement.clientHeight,document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight)}scroll(e,t){return void 0===e&&void 0===t?{x:this.elements[0]?.scrollLeft||0,y:this.elements[0]?.scrollTop||0}:this.each((n=>{void 0!==e&&(n.scrollLeft=e),void 0!==t&&(n.scrollTop=t)}))}offset(){const e=this.elements[0];if(!e)return{top:0,left:0};const t=e.getBoundingClientRect();return{top:t.top+window.pageYOffset,left:t.left+window.pageXOffset}}}const $=(e,t=document)=>new KAnime(e,t);"undefined"!=typeof window&&(window.$=$);export default KAnime;
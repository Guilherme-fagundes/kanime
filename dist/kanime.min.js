class KAnime{constructor(e){if(!KAnime.kIsModernBrowser())throw new Error("Your browser is incompatible with the KAnime library. Please update to a recent version.");if("string"==typeof e)this.elements=Array.from(document.querySelectorAll(e));else if(e instanceof HTMLElement)this.elements=[e];else{if(!(e instanceof NodeList||Array.isArray(e)))throw new Error("Invalid selector. Must be a string, HTMLElement, or NodeList.");this.elements=Array.from(e)}this.kDuration=500}kForEach(e){return this.elements.forEach(e),this}kSetDuration(e){return this.kDuration=e,this}kAdd(e){return this.kForEach((t=>{"string"==typeof e?t.insertAdjacentHTML("beforeend",e):e instanceof HTMLElement&&t.appendChild(e)}))}kAddFirst(e){return this.kForEach((t=>{"string"==typeof e?t.insertAdjacentHTML("afterbegin",e):e instanceof HTMLElement&&t.insertBefore(e,t.firstChild)}))}kInsertBefore(e){return this.kForEach((t=>{"string"==typeof e?t.insertAdjacentHTML("beforebegin",e):e instanceof HTMLElement&&t.parentNode.insertBefore(e,t)}))}kInsertAfter(e){return this.kForEach((t=>{"string"==typeof e?t.insertAdjacentHTML("afterend",e):e instanceof HTMLElement&&t.parentNode.insertBefore(e,t.nextSibling)}))}kRemove(){return this.kForEach((e=>{e.parentNode&&e.parentNode.removeChild(e)}))}kClone(e=!0){const t=this.elements.map((t=>t.cloneNode(e)));return new KAnime(t)}kWrapWith(e){return this.kForEach((t=>{const r="string"==typeof e?document.createElement("div").insertAdjacentHTML("afterbegin",e).firstElementChild:e.cloneNode(!0);t.parentNode.insertBefore(r,t),r.appendChild(t)}))}kUnwrap(){return this.kForEach((e=>{const t=e.parentNode;if(t&&t!==document.body){for(;t.firstChild;)t.parentNode.insertBefore(t.firstChild,t);t.parentNode.removeChild(t)}}))}kListen(e,t){const r=e.split(/[,\s]+/);return this.kForEach((e=>{r.forEach((r=>{e.addEventListener(r,(r=>t.call(e,r)))}))}))}kRemoveListener(e,t){return this.kForEach((r=>r.removeEventListener(e,t)))}kOnce(e,t){return this.kForEach((r=>{const n=o=>{t(o),r.removeEventListener(e,n)};r.addEventListener(e,n)}))}kDispatch(e){return this.kForEach((t=>{const r=new Event(e,{bubbles:!0,cancelable:!0});t.dispatchEvent(r)}))}kHover(e,t){return this.kForEach((r=>{r.addEventListener("mouseenter",e),r.addEventListener("mouseleave",t)}))}kShowFade(){return this.kForEach((e=>{"none"===window.getComputedStyle(e).display&&(e.style.display="block",e.style.opacity=0),e.style.transition=`opacity ${this.kDuration}ms ease-in-out`,e.offsetWidth,requestAnimationFrame((()=>{e.style.opacity=1}))}))}kHideFade(){return this.kForEach((e=>{e.style.opacity=1,e.style.transition=`opacity ${this.kDuration}ms ease-in-out`,e.offsetWidth,requestAnimationFrame((()=>{e.style.opacity=0,setTimeout((()=>{e.style.display="none"}),this.kDuration)}))}))}kToggleFade(){return this.kForEach((e=>{"none"===window.getComputedStyle(e).display?this.kShowFade():this.kHideFade()}))}kPlayMedia(){return this.kForEach((e=>{if("VIDEO"!==e.tagName&&"AUDIO"!==e.tagName)throw new Error("kPlayMedia can only be used on <video> or <audio> elements.");e.play()}))}kPauseMedia(){return this.kForEach((e=>{if("VIDEO"!==e.tagName&&"AUDIO"!==e.tagName)throw new Error("kPauseMedia can only be used on <video> or <audio> elements.");e.pause()}))}kToggleMedia(){return this.kForEach((e=>{if("VIDEO"!==e.tagName&&"AUDIO"!==e.tagName)throw new Error("kToggleMedia can only be used on <video> or <audio> elements.");e.paused?e.play():e.pause()}))}kSetVolume(e){return this.kForEach((t=>{if("VIDEO"!==t.tagName&&"AUDIO"!==t.tagName)throw new Error("kSetVolume can only be used on <video> or <audio> elements.");t.volume=Math.min(Math.max(e,0),1)}))}kMuteMedia(){return this.kForEach((e=>{if("VIDEO"!==e.tagName&&"AUDIO"!==e.tagName)throw new Error("kMuteMedia can only be used on <video> or <audio> elements.");e.muted=!0}))}kUnmuteMedia(){return this.kForEach((e=>{if("VIDEO"!==e.tagName&&"AUDIO"!==e.tagName)throw new Error("kUnmuteMedia can only be used on <video> or <audio> elements.");e.muted=!1}))}kSeekMedia(e){return this.kForEach((t=>{if("VIDEO"!==t.tagName&&"AUDIO"!==t.tagName)throw new Error("kSeekMedia can only be used on <video> or <audio> elements.");t.currentTime=Math.max(0,Math.min(e,t.duration||0))}))}kGetMediaTime(){if("VIDEO"===this.elements[0].tagName||"AUDIO"===this.elements[0].tagName)return this.elements[0].currentTime;throw new Error("kGetMediaTime can only be used on <video> or <audio> elements.")}kGetMediaDuration(){if("VIDEO"===this.elements[0].tagName||"AUDIO"===this.elements[0].tagName)return this.elements[0].duration;throw new Error("kGetMediaDuration can only be used on <video> or <audio> elements.")}kFormData(){const e=this.elements[0];if(!(e instanceof HTMLFormElement))throw new Error("kFormData can only be used on form elements.");new FormData(e);const t=new URLSearchParams;return Array.from(e.elements).forEach((e=>{!e.disabled&&e.name&&("checkbox"===e.type||"radio"===e.type?e.checked&&t.append(e.name,e.value):t.append(e.name,e.value))})),t.toString()}kFormArray(){const e=this.elements[0];if(!(e instanceof HTMLFormElement))throw new Error("kFormArray can only be used on form elements.");const t=[];return Array.from(e.elements).forEach((e=>{!e.disabled&&e.name&&("checkbox"===e.type||"radio"===e.type?e.checked&&t.push({name:e.name,value:e.value}):t.push({name:e.name,value:e.value}))})),t}kValue(e){return void 0===e?"checkbox"===this.elements[0].type||"radio"===this.elements[0].type?this.elements.filter((e=>e.checked)).map((e=>e.value)):this.elements[0].value:this.kForEach((t=>t.value=e))}kFormParams(){return this.kFormData()}kOnFormSubmit(e){return this.kForEach((t=>{if(!(t instanceof HTMLFormElement))throw new Error("kOnFormSubmit can only be used on form elements.");t.addEventListener("submit",(r=>{r.preventDefault();const n=new FormData(t),o=Object.fromEntries(n.entries());e(o,t)}))}))}async kSubmitForm(e={}){const t=this.elements[0];if(!(t instanceof HTMLFormElement))throw new Error("kSubmitForm can only be used on form elements.");const r=new FormData(t),n=e.method||"POST",o={...e.headers};let a;e.json?(a=JSON.stringify(Object.fromEntries(r.entries())),o["Content-Type"]="application/json"):a="GET"===n.toUpperCase()?null:r;const i=new AbortController,s=e.timeout||0;s>0&&setTimeout((()=>i.abort()),s);try{const e=await fetch(t.action,{method:n,headers:o,body:a,signal:i.signal});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const r=e.headers.get("Content-Type");return r&&r.includes("application/json")?await e.json():await e.text()}catch(e){if("AbortError"===e.name)throw new Error("Request timed out");throw e}}kAttr(e,t){return void 0===t?this.elements[0].getAttribute(e):this.kForEach((r=>r.setAttribute(e,t)))}kStyle(e,t){return void 0===t?window.getComputedStyle(this.elements[0])[e]:this.kForEach((r=>r.style[e]=t))}kAddClass(e){return this.kForEach((t=>t.classList.add(e)))}kRemoveClass(e){return this.kForEach((t=>t.classList.remove(e)))}kToggleClass(e){return this.kForEach((t=>t.classList.toggle(e)))}static kIsModernBrowser(){return"querySelector"in document&&"addEventListener"in window&&"fetch"in window}static kSelect(e){return new KAnime(e)}}const k=(e,t=document)=>new KAnime(e,t);"undefined"!=typeof window&&(window.k=k),window.KAnime=KAnime,window.k=k;export default KAnime;
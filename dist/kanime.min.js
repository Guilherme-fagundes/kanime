!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).KAnime=t()}(this,(function(){"use strict";class e{constructor(t){if(!e.kIsModernBrowser())throw new Error("Your browser is incompatible with the KAnime library. Please update to a recent version.");if("string"==typeof t)this.elements=Array.from(document.querySelectorAll(t));else if(t instanceof HTMLElement)this.elements=[t];else{if(!(t instanceof NodeList||Array.isArray(t)))throw new Error("Invalid selector. Must be a string, HTMLElement, or NodeList.");this.elements=Array.from(t)}this.kDuration=500}kForEach(e){return this.elements.forEach(e),this}kSetDuration(e){return this.kDuration=e,this}static kIsModernBrowser(){return"querySelector"in document&&"addEventListener"in window&&"fetch"in window}static kSelect(t){return new e(t)}kCalculate(){if(!this.elements[0])return null;const e=this.elements[0].getBoundingClientRect();return{top:e.top+window.scrollY,left:e.left+window.scrollX,width:e.width,height:e.height}}kAdd(e){return this.kForEach((t=>{"string"==typeof e?t.insertAdjacentHTML("beforeend",e):e instanceof HTMLElement&&t.appendChild(e)}))}kAddFirst(e){return this.kForEach((t=>{"string"==typeof e?t.insertAdjacentHTML("afterbegin",e):e instanceof HTMLElement&&t.insertBefore(e,t.firstChild)}))}kInsertBefore(e){return this.kForEach((t=>{"string"==typeof e?t.insertAdjacentHTML("beforebegin",e):e instanceof HTMLElement&&t.parentNode.insertBefore(e,t)}))}kInsertAfter(e){return this.kForEach((t=>{"string"==typeof e?t.insertAdjacentHTML("afterend",e):e instanceof HTMLElement&&t.parentNode.insertBefore(e,t.nextSibling)}))}kRemove(){return this.kForEach((e=>{e.parentNode&&e.parentNode.removeChild(e)}))}kClone(t=!0){const n=this.elements.map((e=>e.cloneNode(t)));return new e(n)}kWrapWith(e){return this.kForEach((t=>{const n="string"==typeof e?document.createElement("div").insertAdjacentHTML("afterbegin",e).firstElementChild:e.cloneNode(!0);t.parentNode.insertBefore(n,t),n.appendChild(t)}))}kUnwrap(){return this.kForEach((e=>{const t=e.parentNode;if(t&&t!==document.body){for(;t.firstChild;)t.parentNode.insertBefore(t.firstChild,t);t.parentNode.removeChild(t)}}))}kListen(e,t,n){const r=e.split(/[,\s]+/);return this.kForEach((e=>{r.forEach((r=>{"string"==typeof t&&"function"==typeof n?e.addEventListener(r,(function(r){r.target.closest(t)&&e.contains(r.target)&&n.call(r.target,r)})):"function"==typeof t&&e.addEventListener(r,(n=>t.call(e,n)))}))}))}kRemoveListener(e,t){return this.kForEach((n=>n.removeEventListener(e,t)))}kOnce(e,t){return this.kForEach((n=>{const r=o=>{t(o),n.removeEventListener(e,r)};n.addEventListener(e,r)}))}kDispatch(e){return this.kForEach((t=>{const n=new Event(e,{bubbles:!0,cancelable:!0});t.dispatchEvent(n)}))}kHover(e,t){return this.kForEach((n=>{n.addEventListener("mouseenter",e),n.addEventListener("mouseleave",t)}))}kShowFade(){return this.kForEach((e=>{"none"===window.getComputedStyle(e).display&&(e.style.display="block",e.style.opacity=0),e.style.transition=`opacity ${this.kDuration}ms ease-in-out`,e.offsetWidth,requestAnimationFrame((()=>{e.style.opacity=1}))}))}kHideFade(){return this.kForEach((e=>{e.style.opacity=1,e.style.transition=`opacity ${this.kDuration}ms ease-in-out`,e.offsetWidth,requestAnimationFrame((()=>{e.style.opacity=0,setTimeout((()=>{e.style.display="none"}),this.kDuration)}))}))}kToggleFade(){return this.kForEach((e=>{"none"===window.getComputedStyle(e).display?this.kShowFade():this.kHideFade()}))}kanime(e,t=400,n="linear",r){const o={linear:e=>e,ease:e=>e<.5?2*e*e:(4-2*e)*e-1,"ease-in":e=>e*e,"ease-out":e=>e*(2-e),"ease-in-out":e=>e<.5?2*e*e:(4-2*e)*e-1,"cubic-in":e=>e*e*e,"cubic-out":e=>--e*e*e+1,"cubic-in-out":e=>e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1,bounce:e=>{const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},elastic:e=>0===e?0:1===e?1:-Math.pow(2,10*e-10)*Math.sin((10*e-10.75)*(2*Math.PI/3))};return this.kForEach((i=>{const a={},s={},l={};for(const t in e){const n=window.getComputedStyle(i)[t],r=/^([\d.+-]+)([a-z%]*)$/i.exec(n);a[t]=r?parseFloat(r[1]):0,l[t]=r?r[2]:"",s[t]=parseFloat(e[t])}const d=performance.now(),c=m=>{const u=m-d,h=Math.min(1,u/t),k=o[n]?o[n](h):h;for(const t in e){const e=a[t]+(s[t]-a[t])*k;i.style[t]=e+l[t]}h<1?requestAnimationFrame(c):"function"==typeof r&&r.call(i)};requestAnimationFrame(c)}))}kPlayMedia(){return this.kForEach((e=>{if("VIDEO"!==e.tagName&&"AUDIO"!==e.tagName)throw new Error("kPlayMedia can only be used on <video> or <audio> elements.");e.play()}))}kPauseMedia(){return this.kForEach((e=>{if("VIDEO"!==e.tagName&&"AUDIO"!==e.tagName)throw new Error("kPauseMedia can only be used on <video> or <audio> elements.");e.pause()}))}kToggleMedia(){return this.kForEach((e=>{if("VIDEO"!==e.tagName&&"AUDIO"!==e.tagName)throw new Error("kToggleMedia can only be used on <video> or <audio> elements.");e.paused?e.play():e.pause()}))}kSetVolume(e){return this.kForEach((t=>{if("VIDEO"!==t.tagName&&"AUDIO"!==t.tagName)throw new Error("kSetVolume can only be used on <video> or <audio> elements.");t.volume=Math.min(Math.max(e,0),1)}))}kMuteMedia(){return this.kForEach((e=>{if("VIDEO"!==e.tagName&&"AUDIO"!==e.tagName)throw new Error("kMuteMedia can only be used on <video> or <audio> elements.");e.muted=!0}))}kUnmuteMedia(){return this.kForEach((e=>{if("VIDEO"!==e.tagName&&"AUDIO"!==e.tagName)throw new Error("kUnmuteMedia can only be used on <video> or <audio> elements.");e.muted=!1}))}kSeekMedia(e){return this.kForEach((t=>{if("VIDEO"!==t.tagName&&"AUDIO"!==t.tagName)throw new Error("kSeekMedia can only be used on <video> or <audio> elements.");t.currentTime=Math.max(0,Math.min(e,t.duration||0))}))}kGetMediaTime(){if("VIDEO"===this.elements[0].tagName||"AUDIO"===this.elements[0].tagName)return this.elements[0].currentTime;throw new Error("kGetMediaTime can only be used on <video> or <audio> elements.")}kGetMediaDuration(){if("VIDEO"===this.elements[0].tagName||"AUDIO"===this.elements[0].tagName)return this.elements[0].duration;throw new Error("kGetMediaDuration can only be used on <video> or <audio> elements.")}kFormData(){const e=this.elements[0];if(!(e instanceof HTMLFormElement))throw new Error("kFormData can only be used on form elements.");new FormData(e);const t=new URLSearchParams;return Array.from(e.elements).forEach((e=>{!e.disabled&&e.name&&("checkbox"===e.type||"radio"===e.type?e.checked&&t.append(e.name,e.value):t.append(e.name,e.value))})),t.toString()}kFormArray(){const e=this.elements[0];if(!(e instanceof HTMLFormElement))throw new Error("kFormArray can only be used on form elements.");const t=[];return Array.from(e.elements).forEach((e=>{!e.disabled&&e.name&&("checkbox"===e.type||"radio"===e.type?e.checked&&t.push({name:e.name,value:e.value}):t.push({name:e.name,value:e.value}))})),t}kValue(e){return void 0===e?"checkbox"===this.elements[0].type||"radio"===this.elements[0].type?this.elements.filter((e=>e.checked)).map((e=>e.value)):this.elements[0].value:this.kForEach((t=>t.value=e))}kFormParams(){return this.kFormData()}kOnFormSubmit(e){return this.kForEach((t=>{if(!(t instanceof HTMLFormElement))throw new Error("kOnFormSubmit can only be used on form elements.");t.addEventListener("submit",(n=>{n.preventDefault();const r=new FormData(t),o=Object.fromEntries(r.entries());e(o,t)}))}))}async kSubmitForm(e={}){const t=this.elements[0];if(!(t instanceof HTMLFormElement))throw new Error("kSubmitForm can only be used on form elements.");const n=new FormData(t),r=e.method||"POST",o={...e.headers};let i;e.json?(i=JSON.stringify(Object.fromEntries(n.entries())),o["Content-Type"]="application/json"):i="GET"===r.toUpperCase()?null:n;const a=new AbortController,s=e.timeout||0;s>0&&setTimeout((()=>a.abort()),s);try{const e=await fetch(t.action,{method:r,headers:o,body:i,signal:a.signal});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const n=e.headers.get("Content-Type");return n&&n.includes("application/json")?await e.json():await e.text()}catch(l){if("AbortError"===l.name)throw new Error("Request timed out");throw l}}kAttr(e,t){return void 0===t?this.elements[0].getAttribute(e):this.kForEach((n=>n.setAttribute(e,t)))}kStyle(e,t){return void 0===t?window.getComputedStyle(this.elements[0])[e]:this.kForEach((n=>n.style[e]=t))}kAddClass(e){return this.kForEach((t=>t.classList.add(e)))}kRemoveClass(e){return this.kForEach((t=>t.classList.remove(e)))}kToggleClass(e){return this.kForEach((t=>t.classList.toggle(e)))}}const t=(t,n=document)=>new e(t,n);return"undefined"!=typeof window&&(window.k=t),window.KAnime=e,window.k=t,e}));

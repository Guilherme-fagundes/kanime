!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).KAnime=t()}(this,(function(){"use strict";var e=Object.defineProperty,t=(t,n,r)=>((t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r)(t,"symbol"!=typeof n?n+"":n,r);const n=class e{constructor(t){if(!e.isModernBrowser())throw new Error("Your browser is incompatible with the KAnime library. Please update to a recent version.");if("string"==typeof t)this.elements=Array.from(document.querySelectorAll(t));else if(t instanceof HTMLElement)this.elements=[t];else{if(!(t instanceof NodeList||Array.isArray(t)))throw new Error("Invalid selector. Must be a string, HTMLElement, or NodeList.");this.elements=Array.from(t)}this.duration=500}each(e){return this.elements.forEach(e),this}setDuration(e){return this.duration=e,this}append(e){return this.each((t=>{"string"==typeof e?t.insertAdjacentHTML("beforeend",e):e instanceof HTMLElement&&t.appendChild(e)}))}prepend(e){return this.each((t=>{"string"==typeof e?t.insertAdjacentHTML("afterbegin",e):e instanceof HTMLElement&&t.insertBefore(e,t.firstChild)}))}before(e){return this.each((t=>{"string"==typeof e?t.insertAdjacentHTML("beforebegin",e):e instanceof HTMLElement&&t.parentNode.insertBefore(e,t)}))}after(e){return this.each((t=>{"string"==typeof e?t.insertAdjacentHTML("afterend",e):e instanceof HTMLElement&&t.parentNode.insertBefore(e,t.nextSibling)}))}remove(){return this.each((e=>{e.parentNode&&e.parentNode.removeChild(e)}))}clone(t=!0){const n=this.elements.map((e=>e.cloneNode(t)));return new e(n)}wrap(e){return this.each((t=>{const n="string"==typeof e?document.createElement("div").insertAdjacentHTML("afterbegin",e).firstElementChild:e.cloneNode(!0);t.parentNode.insertBefore(n,t),n.appendChild(t)}))}unwrap(){return this.each((e=>{const t=e.parentNode;if(t&&t!==document.body){for(;t.firstChild;)t.parentNode.insertBefore(t.firstChild,t);t.parentNode.removeChild(t)}}))}on(e,t,n=null,r=null){const i="string"==typeof t,s=e.split(/[,\s]+/);return this.each((e=>{s.forEach((s=>{i?e.addEventListener(s,(e=>{e.target.matches(t)&&n.call(r||e.target,e)})):e.addEventListener(s,(n=>{t.call(r||e,n)}))}))}))}off(e,t){return this.each((n=>n.removeEventListener(e,t)))}one(e,t){return this.each((n=>{const r=i=>{t(i),n.removeEventListener(e,r)};n.addEventListener(e,r)}))}trigger(e){return this.each((t=>{const n=new Event(e,{bubbles:!0,cancelable:!0});t.dispatchEvent(n)}))}hover(e,t){return this.each((n=>{n.addEventListener("mouseenter",e),n.addEventListener("mouseleave",t)}))}fadeIn(){return this.each((e=>{"none"===window.getComputedStyle(e).display&&(e.style.display="block",e.style.opacity=0),e.style.transition=`opacity ${this.duration}ms ease-in-out`,e.offsetWidth,requestAnimationFrame((()=>{e.style.opacity=1}))}))}fadeOut(){return this.each((e=>{e.style.opacity=1,e.style.transition=`opacity ${this.duration}ms ease-in-out`,e.offsetWidth,requestAnimationFrame((()=>{e.style.opacity=0,setTimeout((()=>{e.style.display="none"}),this.duration)}))}))}slideUp(){return this.each((e=>{if("none"===window.getComputedStyle(e).display)return;const t=window.getComputedStyle(e),n=e.offsetHeight,r=parseFloat(t.paddingTop),i=parseFloat(t.paddingBottom),s=parseFloat(t.marginTop),o=parseFloat(t.marginBottom);e.style.height=`${n}px`,e.style.paddingTop=`${r}px`,e.style.paddingBottom=`${i}px`,e.style.marginTop=`${s}px`,e.style.marginBottom=`${o}px`,e.style.overflow="hidden",e.style.transition=`height ${this.duration}ms ease-in-out, padding ${this.duration}ms ease-in-out, margin ${this.duration}ms ease-in-out`,e.offsetWidth,requestAnimationFrame((()=>{e.style.height="0",e.style.paddingTop="0",e.style.paddingBottom="0",e.style.marginTop="0",e.style.marginBottom="0",setTimeout((()=>{e.style.display="none",e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),e.style.removeProperty("overflow"),e.style.removeProperty("transition")}),this.duration)}))}))}slideDown(){return this.each((e=>{if("none"!==window.getComputedStyle(e).display)return;e.style.display="block";const t=window.getComputedStyle(e),n=e.scrollHeight,r=parseFloat(t.paddingTop),i=parseFloat(t.paddingBottom),s=parseFloat(t.marginTop),o=parseFloat(t.marginBottom);e.style.height="0",e.style.paddingTop="0",e.style.paddingBottom="0",e.style.marginTop="0",e.style.marginBottom="0",e.style.overflow="hidden",e.style.transition=`height ${this.duration}ms ease-in-out, padding ${this.duration}ms ease-in-out, margin ${this.duration}ms ease-in-out`,e.offsetWidth,requestAnimationFrame((()=>{e.style.height=`${n}px`,e.style.paddingTop=`${r}px`,e.style.paddingBottom=`${i}px`,e.style.marginTop=`${s}px`,e.style.marginBottom=`${o}px`,setTimeout((()=>{e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),e.style.removeProperty("overflow"),e.style.removeProperty("transition")}),this.duration)}))}))}fadeToggle(){return this.each((e=>{"none"===window.getComputedStyle(e).display?this.fadeIn():this.fadeOut()}))}slideToggle(){return this.each((e=>{"none"===window.getComputedStyle(e).display?this.slideDown():this.slideUp()}))}serialize(){const e=this.elements[0];if(!(e instanceof HTMLFormElement))throw new Error("serialize can only be used on form elements.");new FormData(e);const t=new URLSearchParams;return Array.from(e.elements).forEach((e=>{!e.disabled&&e.name&&("checkbox"===e.type||"radio"===e.type?e.checked&&t.append(e.name,e.value):t.append(e.name,e.value))})),t.toString()}serializeArray(){const e=this.elements[0];if(!(e instanceof HTMLFormElement))throw new Error("serializeArray can only be used on form elements.");const t=[];return Array.from(e.elements).forEach((e=>{!e.disabled&&e.name&&("checkbox"===e.type||"radio"===e.type?e.checked&&t.push({name:e.name,value:e.value}):t.push({name:e.name,value:e.value}))})),t}val(e){return void 0===e?"checkbox"===this.elements[0].type||"radio"===this.elements[0].type?this.elements.filter((e=>e.checked)).map((e=>e.value)):this.elements[0].value:this.each((t=>t.value=e))}param(){return this.serialize()}submit(e){return this.each((t=>{if(!(t instanceof HTMLFormElement))throw new Error("The submit method can only be used on form elements.");t.addEventListener("submit",(n=>{n.preventDefault();const r=new FormData(t),i=Object.fromEntries(r.entries());e(i,t)}))}))}async ajaxSubmit(e={}){const t=this.elements[0];if(!(t instanceof HTMLFormElement))throw new Error("ajaxSubmit can only be used on form elements.");const n=new FormData(t),r=e.method||"POST",i={...e.headers};let s;e.json?(s=JSON.stringify(Object.fromEntries(n.entries())),i["Content-Type"]="application/json"):s="GET"===r.toUpperCase()?null:n;const o=new AbortController,a=e.timeout||0;a>0&&setTimeout((()=>o.abort()),a);try{const e=await fetch(t.action,{method:r,headers:i,body:s,signal:o.signal});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const n=e.headers.get("Content-Type");return n&&n.includes("application/json")?await e.json():await e.text()}catch(l){if("AbortError"===l.name)throw new Error("Request timed out");throw l}}attr(e,t){return void 0===t?this.elements[0].getAttribute(e):this.each((n=>n.setAttribute(e,t)))}attrs(e){if(void 0===e){const e=this.elements[0];return e?Array.from(e.attributes).reduce(((e,t)=>(e[t.name]=t.value,e)),{}):{}}return this.each((t=>{for(const[n,r]of Object.entries(e))t.setAttribute(n,r)}))}toggleAttr(e,t){return this.each((n=>{void 0===t?n.hasAttribute(e)?n.removeAttribute(e):n.setAttribute(e,""):t?n.setAttribute(e,""):n.removeAttribute(e)}))}removeAttr(e){return this.each((t=>t.removeAttribute(e)))}css(e,t){return void 0===t?window.getComputedStyle(this.elements[0])[e]:this.each((n=>n.style[e]=t))}addClass(e){return this.each((t=>t.classList.add(e)))}removeClass(e){return this.each((t=>t.classList.remove(e)))}toggleClass(e){return this.each((t=>t.classList.toggle(e)))}static isModernBrowser(){return"querySelector"in document&&"addEventListener"in window&&"fetch"in window}static checkCompatibility(){if(!("querySelector"in document&&"addEventListener"in window&&"fetch"in window))throw new Error("Your browser is incompatible with the KAnime library. Please update to a recent version.")}static select(t){return new e(t)}static createVirtualElement(e,t={},n=[]){const r=document.createElement(e);for(const[i,s]of Object.entries(t))r.setAttribute(i,s);return n.forEach((e=>{"string"==typeof e?r.appendChild(document.createTextNode(e)):r.appendChild(e)})),r}static extend(e,...t){return Object.assign(e,...t)}detach(){return this.each((e=>{e.parentNode&&e.parentNode.removeChild(e)}))}replaceWith(e){return this.each((t=>{"string"==typeof e?(t.insertAdjacentHTML("beforebegin",e),t.parentNode.removeChild(t)):e instanceof HTMLElement&&t.parentNode.replaceChild(e,t)}))}empty(){return this.each((e=>{for(;e.firstChild;)e.removeChild(e.firstChild)}))}closest(t){const n=this.elements.map((e=>e.closest(t))).filter((e=>e));return new e(n)}next(){const t=this.elements.map((e=>e.nextElementSibling)).filter((e=>e));return new e(t)}prev(){const t=this.elements.map((e=>e.previousElementSibling)).filter((e=>e));return new e(t)}find(t){const n=this.elements.flatMap((e=>Array.from(e.querySelectorAll(t))));return new e(n)}data(e,t){var n;return void 0===t?null==(n=this.elements[0])?void 0:n.dataset[e]:this.each((n=>{n.dataset[e]=t}))}toggle(){return this.each((e=>{const t="none"===window.getComputedStyle(e).display;e.style.display=t?"block":"none"}))}stop(){return this.each((e=>{e.style.transition="none"}))}animate(e,t=this.duration,n="linear"){return new Promise((r=>{this.each((i=>{const s={},o={};for(const t in e)s[t]=parseFloat(getComputedStyle(i)[t])||0,o[t]=e[t];let a;const l=d=>{a||(a=d);const c=Math.min((d-a)/t,1),h=this._ease(c,n);for(const t in e){const e=s[t],n=e+(o[t]-e)*h;i.style[t]=n+("opacity"===t?"":"px")}c<1?requestAnimationFrame(l):r()};requestAnimationFrame(l)}))}))}_ease(e,t){switch(t){case"linear":default:return e;case"ease-in":return e*e;case"ease-out":return e*(2-e);case"ease-in-out":return e<.5?2*e*e:(4-2*e)*e-1}}async ajax({url:e,method:t="GET",data:n=null,headers:r={},timeout:i=0}){const s=new AbortController,o=s.signal;i>0&&setTimeout((()=>s.abort()),i);const a=n instanceof FormData,l={...r,...a?{}:{"Content-Type":"application/json"}},d=a?n:n?JSON.stringify(n):null;try{const n=await fetch(e,{method:t,headers:l,body:"GET"===t.toUpperCase()?null:d,signal:o});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const r=n.headers.get("Content-Type");return r&&r.includes("application/json")?await n.json():r&&r.includes("text/")?await n.text():await n.blob()}catch(c){if("AbortError"===c.name)throw new Error("Request timed out");throw c}}static use(e,t){if("function"!=typeof t)throw new Error(`Plugin ${e} must be a function.`);this.plugins[e]=t}static callPlugin(e,...t){if(this.plugins[e])return this.plugins[e](...t);throw new Error(`Plugin ${e} not found.`)}static listPlugins(){return Object.keys(this.plugins)}static removePlugin(e){if(!this.plugins[e])throw new Error(`Plugin ${e} not found.`);delete this.plugins[e]}isVisible(){return this.elements.some((e=>"none"!==window.getComputedStyle(e).display&&e.offsetHeight>0))}hasClass(e){return this.elements.some((t=>t.classList.contains(e)))}hasAttr(e){return this.elements.some((t=>t.hasAttribute(e)))}isChecked(){return this.elements.some((e=>!0===e.checked))}isEnabled(){return this.elements.some((e=>!e.disabled))}isDisabled(){return this.elements.some((e=>e.disabled))}static getScript(e){return new Promise(((t,n)=>{const r=document.createElement("script");r.src=e,r.onload=t,r.onerror=n,document.head.appendChild(r)}))}is(e){return this.elements.some((t=>t.matches(e)))}play(){return this.each((e=>{e instanceof HTMLMediaElement&&e.play().catch((e=>console.error("Error playing media:",e)))}))}pause(){return this.each((e=>{e instanceof HTMLMediaElement&&e.pause()}))}currentTime(e){return void 0===e?this.elements[0]instanceof HTMLMediaElement?this.elements[0].currentTime:null:this.each((t=>{t instanceof HTMLMediaElement&&(t.currentTime=e)}))}volume(e){return void 0===e?this.elements[0]instanceof HTMLMediaElement?this.elements[0].volume:null:this.each((t=>{t instanceof HTMLMediaElement&&(t.volume=Math.min(1,Math.max(0,e)))}))}mute(e=!0){return this.each((t=>{t instanceof HTMLMediaElement&&(t.muted=e)}))}isPlaying(){return this.elements.some((e=>e instanceof HTMLMediaElement&&!e.paused&&!e.ended))}loadSource(e){return this.each((t=>{t instanceof HTMLMediaElement&&(t.src=e,t.load())}))}playbackRate(e){return void 0===e?this.elements[0]instanceof HTMLMediaElement?this.elements[0].playbackRate:null:this.each((t=>{t instanceof HTMLMediaElement&&(t.playbackRate=e)}))}width(e){var t;return void 0===e?(null==(t=this.elements[0])?void 0:t.offsetWidth)||0:this.each((t=>{t.style.width=`${e}px`}))}height(e){var t;return void 0===e?(null==(t=this.elements[0])?void 0:t.offsetHeight)||0:this.each((t=>{t.style.height=`${e}px`}))}static documentWidth(){return Math.max(document.documentElement.clientWidth,document.body.scrollWidth,document.documentElement.scrollWidth,document.body.offsetWidth,document.documentElement.offsetWidth)}static documentHeight(){return Math.max(document.documentElement.clientHeight,document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight)}scroll(e,t){var n,r;return void 0===e&&void 0===t?{x:(null==(n=this.elements[0])?void 0:n.scrollLeft)||0,y:(null==(r=this.elements[0])?void 0:r.scrollTop)||0}:this.each((n=>{void 0!==e&&(n.scrollLeft=e),void 0!==t&&(n.scrollTop=t)}))}offset(){const e=this.elements[0];if(!e)return{top:0,left:0};const t=e.getBoundingClientRect();return{top:t.top+window.pageYOffset,left:t.left+window.pageXOffset}}};t(n,"i18n",{locale:"en",translations:{},setLocale(e){this.locale=e},addTranslations(e,t){this.translations[e]={...this.translations[e],...t}},translate(e){var t;return(null==(t=this.translations[this.locale])?void 0:t[e])||e}}),t(n,"plugins",{});let r=n;const i=(e,t=document)=>new r(e,t);return"undefined"!=typeof window&&(window.$=i),r}));
